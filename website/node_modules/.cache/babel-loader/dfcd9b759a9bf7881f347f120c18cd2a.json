{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _jsx2 = require(\"babel-runtime/helpers/jsx\");\n\nvar _jsx3 = _interopRequireDefault(_jsx2);\n\nvar _getPrototypeOf = require(\"babel-runtime/core-js/object/get-prototype-of\");\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require(\"babel-runtime/helpers/createClass\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require(\"babel-runtime/helpers/possibleConstructorReturn\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require(\"babel-runtime/helpers/inherits\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _class, _temp;\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = require(\"react-dom\");\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _clientEvents = require(\"../utils/clientEvents\");\n\nvar _imgUrlGen = require(\"../utils/imgUrlGen\");\n\nvar _Image = require(\"./Image\");\n\nvar _Image2 = _interopRequireDefault(_Image);\n\nvar _BackgroundImage = require(\"./BackgroundImage\");\n\nvar _BackgroundImage2 = _interopRequireDefault(_BackgroundImage);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar canUseDOM = typeof window !== \"undefined\";\nvar AdaptiveImage = (_temp = _class = function (_React$Component) {\n  (0, _inherits3.default)(AdaptiveImage, _React$Component);\n\n  function AdaptiveImage(props) {\n    (0, _classCallCheck3.default)(this, AdaptiveImage);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, (AdaptiveImage.__proto__ || (0, _getPrototypeOf2.default)(AdaptiveImage)).call(this, props));\n\n    _this.state = {\n      visible: false,\n      src: null\n    };\n    _this.loadImage = _this.loadImage.bind(_this);\n    _this.handleClientLoad = _this.handleClientLoad.bind(_this);\n    _this.handleServerLoad = _this.handleServerLoad.bind(_this);\n    return _this;\n  }\n\n  (0, _createClass3.default)(AdaptiveImage, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.loadImage(this.props);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      (0, _clientEvents.deregister)(this.props.id);\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      if (this.props.fileName != nextProps.fileName || this.props.id != nextProps.id) {\n        (0, _clientEvents.deregister)(this.props.id);\n        this.loadImage(nextProps);\n      }\n    }\n  }, {\n    key: \"loadImage\",\n    value: function loadImage(props) {\n      var id = props.id,\n          height = props.height,\n          preLoad = props.preLoad,\n          onShow = props.onShow,\n          fileName = props.fileName,\n          width = props.width,\n          quality = props.quality,\n          altText = props.altText;\n      var image = {\n        id: id,\n        width: width,\n        height: height,\n        fileName: fileName,\n        quality: quality,\n        altText: altText\n      };\n\n      if (canUseDOM) {\n        this.handleClientLoad(image);\n      } else {\n        this.handleServerLoad(image);\n      }\n    }\n  }, {\n    key: \"handleServerLoad\",\n    value: function handleServerLoad(image) {\n      var _props = this.props,\n          preLoad = _props.preLoad,\n          onShow = _props.onShow,\n          src = _props.src;\n\n      if (src) {\n        this.showImage(src);\n      } else if (preLoad) {\n        this.showImage((0, _imgUrlGen.getStaticUrl)(image));\n      }\n    }\n  }, {\n    key: \"handleClientLoad\",\n    value: function handleClientLoad(image) {\n      var _props2 = this.props,\n          preLoad = _props2.preLoad,\n          onShow = _props2.onShow,\n          src = _props2.src;\n\n      if (src) {\n        this.showImage(src);\n      } else if (!preLoad) {\n        (0, _clientEvents.register)(this, onShow);\n      } else {\n        var _src = (0, _imgUrlGen.getUrl)(_reactDom2.default.findDOMNode(this), image);\n\n        this.showImage(_src);\n      }\n    }\n  }, {\n    key: \"showImage\",\n    value: function showImage(src) {\n      var onShow = this.props.onShow;\n      this.setState({\n        src: src,\n        visible: true\n      });\n      onShow(src);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _state = this.state,\n          visible = _state.visible,\n          src = _state.src;\n      var _props3 = this.props,\n          altText = _props3.altText,\n          backgroundImage = _props3.backgroundImage,\n          itemProp = _props3.itemProp,\n          className = _props3.className;\n      var ImgEl = backgroundImage ? _BackgroundImage2.default : _Image2.default;\n      var hideImage = !visible || !src;\n      var imgSrc = hideImage ? null : src;\n      return (0, _jsx3.default)(ImgEl, {\n        src: imgSrc,\n        alt: altText,\n        itemProp: itemProp,\n        className: className\n      });\n    }\n  }]);\n  return AdaptiveImage;\n}(_react2.default.Component), _class.defaultProps = {\n  quality: 80,\n  fileName: \"image.jpg\",\n  onShow: function onShow() {}\n}, _temp);\nAdaptiveImage.propTypes = {\n  width: _propTypes2.default.number,\n  height: _propTypes2.default.number,\n  fileName: _propTypes2.default.string.isRequired,\n  quality: _propTypes2.default.number,\n  className: _propTypes2.default.string,\n  preLoad: _propTypes2.default.bool,\n  altText: _propTypes2.default.string,\n  itemProp: _propTypes2.default.string,\n  scrollThreshold: _propTypes2.default.number,\n  onShow: _propTypes2.default.func,\n  src: _propTypes2.default.string,\n  backgroundImage: _propTypes2.default.bool\n};\nexports.default = AdaptiveImage;","map":{"version":3,"sources":["C:/Users/eddie/Desktop/Codes/ACEngWebsite/website/node_modules/react-adaptive-image/dist/components/AdaptiveImage.js"],"names":["Object","defineProperty","exports","value","_jsx2","require","_jsx3","_interopRequireDefault","_getPrototypeOf","_getPrototypeOf2","_classCallCheck2","_classCallCheck3","_createClass2","_createClass3","_possibleConstructorReturn2","_possibleConstructorReturn3","_inherits2","_inherits3","_class","_temp","_react","_react2","_reactDom","_reactDom2","_propTypes","_propTypes2","_clientEvents","_imgUrlGen","_Image","_Image2","_BackgroundImage","_BackgroundImage2","obj","__esModule","default","canUseDOM","window","AdaptiveImage","_React$Component","props","_this","__proto__","call","state","visible","src","loadImage","bind","handleClientLoad","handleServerLoad","key","componentDidMount","componentWillUnmount","deregister","id","componentWillReceiveProps","nextProps","fileName","height","preLoad","onShow","width","quality","altText","image","_props","showImage","getStaticUrl","_props2","register","_src","getUrl","findDOMNode","setState","render","_state","_props3","backgroundImage","itemProp","className","ImgEl","hideImage","imgSrc","alt","Component","defaultProps","propTypes","number","string","isRequired","bool","scrollThreshold","func"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _jsx2 = require(\"babel-runtime/helpers/jsx\");\n\nvar _jsx3 = _interopRequireDefault(_jsx2);\n\nvar _getPrototypeOf = require(\"babel-runtime/core-js/object/get-prototype-of\");\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require(\"babel-runtime/helpers/createClass\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require(\"babel-runtime/helpers/possibleConstructorReturn\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require(\"babel-runtime/helpers/inherits\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _class, _temp;\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = require(\"react-dom\");\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _clientEvents = require(\"../utils/clientEvents\");\n\nvar _imgUrlGen = require(\"../utils/imgUrlGen\");\n\nvar _Image = require(\"./Image\");\n\nvar _Image2 = _interopRequireDefault(_Image);\n\nvar _BackgroundImage = require(\"./BackgroundImage\");\n\nvar _BackgroundImage2 = _interopRequireDefault(_BackgroundImage);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar canUseDOM = typeof window !== \"undefined\";\n\nvar AdaptiveImage = (_temp = _class = function (_React$Component) {\n    (0, _inherits3.default)(AdaptiveImage, _React$Component);\n\n    function AdaptiveImage(props) {\n        (0, _classCallCheck3.default)(this, AdaptiveImage);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (AdaptiveImage.__proto__ || (0, _getPrototypeOf2.default)(AdaptiveImage)).call(this, props));\n\n        _this.state = {\n            visible: false,\n            src: null\n        };\n        _this.loadImage = _this.loadImage.bind(_this);\n        _this.handleClientLoad = _this.handleClientLoad.bind(_this);\n        _this.handleServerLoad = _this.handleServerLoad.bind(_this);\n        return _this;\n    }\n\n    (0, _createClass3.default)(AdaptiveImage, [{\n        key: \"componentDidMount\",\n        value: function componentDidMount() {\n            this.loadImage(this.props);\n        }\n    }, {\n        key: \"componentWillUnmount\",\n        value: function componentWillUnmount() {\n            (0, _clientEvents.deregister)(this.props.id);\n        }\n    }, {\n        key: \"componentWillReceiveProps\",\n        value: function componentWillReceiveProps(nextProps) {\n            if (this.props.fileName != nextProps.fileName || this.props.id != nextProps.id) {\n                (0, _clientEvents.deregister)(this.props.id);\n                this.loadImage(nextProps);\n            }\n        }\n    }, {\n        key: \"loadImage\",\n        value: function loadImage(props) {\n            var id = props.id,\n                height = props.height,\n                preLoad = props.preLoad,\n                onShow = props.onShow,\n                fileName = props.fileName,\n                width = props.width,\n                quality = props.quality,\n                altText = props.altText;\n\n            var image = { id: id, width: width, height: height, fileName: fileName, quality: quality, altText: altText };\n            if (canUseDOM) {\n                this.handleClientLoad(image);\n            } else {\n                this.handleServerLoad(image);\n            }\n        }\n    }, {\n        key: \"handleServerLoad\",\n        value: function handleServerLoad(image) {\n            var _props = this.props,\n                preLoad = _props.preLoad,\n                onShow = _props.onShow,\n                src = _props.src;\n\n            if (src) {\n                this.showImage(src);\n            } else if (preLoad) {\n                this.showImage((0, _imgUrlGen.getStaticUrl)(image));\n            }\n        }\n    }, {\n        key: \"handleClientLoad\",\n        value: function handleClientLoad(image) {\n            var _props2 = this.props,\n                preLoad = _props2.preLoad,\n                onShow = _props2.onShow,\n                src = _props2.src;\n\n            if (src) {\n                this.showImage(src);\n            } else if (!preLoad) {\n                (0, _clientEvents.register)(this, onShow);\n            } else {\n                var _src = (0, _imgUrlGen.getUrl)(_reactDom2.default.findDOMNode(this), image);\n                this.showImage(_src);\n            }\n        }\n    }, {\n        key: \"showImage\",\n        value: function showImage(src) {\n            var onShow = this.props.onShow;\n\n            this.setState({\n                src: src,\n                visible: true\n            });\n            onShow(src);\n        }\n    }, {\n        key: \"render\",\n        value: function render() {\n            var _state = this.state,\n                visible = _state.visible,\n                src = _state.src;\n            var _props3 = this.props,\n                altText = _props3.altText,\n                backgroundImage = _props3.backgroundImage,\n                itemProp = _props3.itemProp,\n                className = _props3.className;\n\n            var ImgEl = backgroundImage ? _BackgroundImage2.default : _Image2.default;\n            var hideImage = !visible || !src;\n            var imgSrc = hideImage ? null : src;\n            return (0, _jsx3.default)(ImgEl, {\n                src: imgSrc,\n                alt: altText,\n                itemProp: itemProp,\n                className: className\n            });\n        }\n    }]);\n    return AdaptiveImage;\n}(_react2.default.Component), _class.defaultProps = {\n    quality: 80,\n    fileName: \"image.jpg\",\n    onShow: function onShow() {}\n}, _temp);\n\n\nAdaptiveImage.propTypes = {\n    width: _propTypes2.default.number,\n    height: _propTypes2.default.number,\n    fileName: _propTypes2.default.string.isRequired,\n    quality: _propTypes2.default.number,\n    className: _propTypes2.default.string,\n    preLoad: _propTypes2.default.bool,\n    altText: _propTypes2.default.string,\n    itemProp: _propTypes2.default.string,\n    scrollThreshold: _propTypes2.default.number,\n    onShow: _propTypes2.default.func,\n    src: _propTypes2.default.string,\n    backgroundImage: _propTypes2.default.bool\n};\n\nexports.default = AdaptiveImage;"]},"metadata":{},"sourceType":"script"}